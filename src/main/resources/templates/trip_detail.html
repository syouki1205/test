<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8" />
	<title>旅行詳細</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

	<style>
		body {
			background: linear-gradient(to right, #f8faff, #eef5ff);
			font-family: "Segoe UI", Arial, sans-serif;
		}

		h1 {
			font-weight: bold;
			color: #333;
			margin-bottom: 20px;
		}

		.trip-info {
			background: #fff;
			padding: 20px;
			border-radius: 10px;
			box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
			margin-bottom: 25px;
		}

		h3 {
			font-weight: bold;
			color: #444;
			margin-top: 30px;
			margin-bottom: 15px;
		}

		.table {
			background: #fff;
			border-radius: 8px;
			overflow: hidden;
			box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
		}

		.table thead th {
			background-color: #f0f4ff;
			color: #333;
			font-weight: 600;
		}

		.btn-primary {
			background-color: #0056b3;
			border-color: #004494;
			font-weight: 600;
			border-radius: 6px;
			padding: 6px 14px;
		}

		.btn-primary:hover {
			background-color: #004494;
		}

		.btn-warning,
		.btn-danger,
		.btn-secondary {
			font-weight: 600;
		}

		/* ⭐ 星評価デザイン（小数点対応） */
		.rating-container {
			position: relative;
			display: inline-block;
			font-size: 1.4rem;
			line-height: 1;
		}

		.stars-bg {
			color: #ccc;
		}

		.stars-fill {
			color: #f4b400;
			position: absolute;
			top: 0;
			left: 0;
			white-space: nowrap;
			overflow: hidden;
		}
	</style>
</head>

<body class="container mt-4">

	<h1 th:text="${trip.title}">旅行タイトル</h1>

	<div class="trip-info">
		<p>都道府県: <span th:text="${trip.prefecture}"></span></p>
		<p>
			日付:
			<span th:text="${#temporals.format(trip.startDate, 'yyyy/MM/dd')}"></span>
			〜
			<span th:text="${#temporals.format(trip.endDate, 'yyyy/MM/dd')}"></span>
		</p>
		<p>
			総合評価:
			<!-- 小数点1桁固定 -->
			<span th:text="${#numbers.formatDecimal(trip.rating, 1, 1)}"></span> / 5
			<!-- 星表示（小数点対応） -->
			<span class="rating-container">
				<span class="stars-bg">★★★★★</span>
				<span class="stars-fill" th:style="'width:' + (${trip.rating} / 5 * 100) + '%'">★★★★★</span>
			</span>
		</p>
		<p>レビュー: <span th:text="${trip.comment}"></span></p>
	</div>

	<h3>スポット一覧</h3>
	<table class="table table-bordered">
		<thead>
			<tr>
				<th>名前</th>
				<th>カテゴリ</th>
				<th>評価</th>
				<th>コメント</th>
				<th>操作</th>
			</tr>
		</thead>
		<tbody>
			<tr th:each="spot : ${trip.spots}">
				<td th:text="${spot.name}">スポット名</td>
				<td th:text="${spot.category}">カテゴリ</td>
				<td>
					<!-- 小数点1桁固定 -->
					<span th:text="${#numbers.formatDecimal(spot.rating, 1, 1)}"></span> / 5
					<!-- 星表示（小数点対応） -->
					<span class="rating-container">
						<span class="stars-bg">★★★★★</span>
						<span class="stars-fill" th:style="'width:' + (${spot.rating} / 5 * 100) + '%'">★★★★★</span>
					</span>
				</td>
				<td th:text="${spot.comment}">コメント</td>
				<td>
					<a th:href="@{'/trips/' + ${trip.id} + '/spots/' + ${spot.id} + '/edit'}"
						class="btn btn-warning btn-sm">編集</a>
					<a th:href="@{'/trips/' + ${trip.id} + '/spots/' + ${spot.id} + '/delete'}"
						class="btn btn-danger btn-sm" onclick="return confirm('削除してもよろしいですか？');">削除</a>
				</td>
			</tr>
		</tbody>
	</table>

	<div class="mt-3">
		<a class="btn btn-primary" th:href="@{'/trips/' + ${trip.id} + '/spots/new'}">＋ スポット追加</a>
		<a class="btn btn-secondary ms-2" th:href="@{/trips}">戻る</a>
	</div>

</body>

</html>